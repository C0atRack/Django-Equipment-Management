{% extends 'equipment_app/base.html' %}

{% load widget_tweaks %}

{% block content %}
<div class="container-fluid">
    <div class="container-md">
        <form class="d-flex my-3 border-bottom justify-content-center align-center" role="search" method="GET" action="">
                {% render_field form.q class+="form-control mb-3 me-3"%}
                <button class="btn btn-success me-3 mb-3" type="submit">Search</button>
        </form>
        {% comment %} TODO: Add specifier fields {% endcomment %}
    </div>
    <div class="container-md">
    {% if query %}
        {% if query %}
        <h2 class="text-center">Results:</h2>

        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th scope="columnheader" >Equipment Name: </th>
                    <th scope="columnheader" >Asset Tag: </th>
                    <th scope="columnheader" >Serial Number: </th>
                    <th scope="columnheader" >Category:</th>
                    <th scope="columnheader" >Availability: </th>
                    <th scope="columnheader" aira-label="Equipment Action Buttons">Actions:</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
            {% for result in page_obj %}
                {%with equipment=result.object%}
                <tr>
                    <th scope="cell" class="align-middle">{{equipment}}</th>
                    <th scope="cell" class="align-middle">{{equipment.AssetTag}}</th>
                    <th scope="cell" class="align-middle">{{equipment.SerialNumber}}</th>
                    <th scope="cell" class="align-middle">{{equipment.Category}}</th>
                    {% if equipment.is_availible %}
                    <th scope="cell" class="align-middle text-success-emphasis">Availible!</th>
                    {% else %}
                     <th scope="cell" class="align-middle text-danger-emphasis">Checked Out</th>
                    {% endif %}
                    <th scope="cell" class="align-middle">
                        <div class="d-flex justify-content-center">
                            <a aria-label="View {{equipment}} information" class="btn btn-primary btn-sm rounded-pill px-3 mx-2" href="{{equipment.get_absolute_url}}">View</a>
                            {% if perms.equipment_app.can_edit %}
                            <a aria-label="Edit {{equipment}}'s information" class="btn btn-success btn-sm rounded-pill px-3 me-2" href="{{equipment.get_edit_absolute_url}}">Edit</a>
                            <a aria-label="Delete {{equipment}}" class="btn btn-danger btn-sm rounded-pill px-3 me-2" href="{{equipment.get_delete_absolute_url}}">Delete</a>
                            {% endif %}
                        </div>
                    </th>
                </tr>
                {%endwith%}
            {% endfor %}
            </tbody>
        </table>
        {% else %}
            <h3>No results found.</h3>
        {% endif %}

        {% if page.has_previous or page.has_next %}
            <div>
                {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
                |
                {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
            </div>
        {% endif %}
    {% endif %}
    </div>
</div>
{% endblock %}